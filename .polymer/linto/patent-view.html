<dom-module id="patent-view">

    <style>
    paper-menu-button {
        padding: 0;
    }
    
    paper-toolbar {
        --paper-toolbar-background: var(--paper-blue-700);
        --paper-toolbar-color: white;
    }
    
    paper-toolbar paper-icon-button {
        margin: 0!important;
    }
    
    paper-toolbar .title {
        padding: 0 12px;
    }
    </style>

    <template>
        <paper-scroll-header-panel class="fit">
            <paper-toolbar id="main-toolbar">
                <paper-icon-button icon="arrow-back" on-click="back"></paper-icon-button>

                <div class="title">[[item.p_no]]</div>

                <paper-icon-button data-id$="[[item._id]]" icon="delete" on-click="remove_patent"></paper-icon-button>
                <paper-icon-button data-id$="[[item._id]]" icon="social:share" on-click="share"></paper-icon-button>

                <paper-menu-button horizontal-align="right">
                    <paper-icon-button class="dropdown-trigger" icon="more-vert"></paper-icon-button>

                    <paper-menu class="dropdown-content" style="min-width: 200px;">
                        <paper-item class="cursor-p">Manage Taxonomy</paper-item>
                    </paper-menu>
                </paper-menu-button>
            </paper-toolbar>

            <div class="blue-700">
                <div class="center-justified horizontal layout">
                    <div class="horizontal layout li wrap" style="padding: 4px 12px;">
                        <template as="concept" is="dom-repeat" items="[[return_concept_array(item.concept)]]">
                            <div class="cursor-p lowercase" on-click="concept_opt" style="background: rgba(255, 255, 255, .95); border-radius: 24px; color: #1976D2; margin: 4px 8px 4px 0; padding: 4px 12px;">[[concept]]</div>
                        </template>
                    </div>
                </div>
            </div>

            <div class="blue-700 center-justified horizontal layout">
                <div class="blue-500 center horizontal layout li">
                    <div class="cursor-d flex" style="line-height: 24px; padding: 16px;"><span>[[item.p_no]]</span> / Details</div>

                    <paper-menu-button horizontal-align="right" style="margin-right: 8px;">
                        <paper-icon-button class="dropdown-trigger" icon="arrow-drop-down"></paper-icon-button>

                        <paper-menu attr-for-selected="data-id" class="dropdown-content" selected="Details" style="min-width: 200px;">
                            <paper-item class="cursor-p" data-id="Details">Details</paper-item>
                            <paper-item class="cursor-p" data-id="Technologies">Technologies</paper-item>
                        </paper-menu>
                    </paper-menu-button>
                </div>
            </div>

            <div class="center-justified horizontal layout">
                <div class="li white">
                    <div class="layout vertical" style="margin: 16px;">
                        <div style="color: #AAA; font-size: 16px; line-height: 24px;">Title</div>
                        <div class="lowercase" style="font-size: 16px; line-height: 24px;">[[item.title]]</div>
                    </div>

                    <div class="layout vertical" style="margin: 16px;">
                        <div style="color: #AAA; font-size: 16px; line-height: 24px;">Abstract</div>
                        <div class="lowercase" style="font-size: 16px; line-height: 24px;">[[item.abstract]]</div>
                    </div>

                    <div class="layout vertical" style="margin: 16px;">
                        <div style="color: #AAA; font-size: 16px; line-height: 24px;">Keyword</div>
                        <div class="lowercase" style="font-size: 16px; line-height: 24px;">[[return_keyword_text(item.keyword)]]</div>
                    </div>

                    <div class="layout vertical" style="margin: 16px;">
                        <div style="color: #AAA; font-size: 16px; line-height: 24px;">Filed</div>
                        <div style="font-size: 16px; line-height: 24px;">[[item.app_date]]</div>
                    </div>

                    <div class="layout vertical" style="margin: 16px; margin-bottom: 48px;">
                        <div style="color: #AAA; font-size: 16px; line-height: 24px;">Assignee</div>
                        <div class="lowercase" style="font-size: 16px; line-height: 24px;">[[return_assignee_text(item.assignee)]]</div>
                    </div>
                </div>
            </div>

            <div style="min-height: 80px;"></div>
        </paper-scroll-header-panel>
    </template>

    <script>
    Polymer({

        back: function() {
            document.querySelector("#main-page").selected = 1;
            document.querySelector("#inbox-view paper-scroll-header-panel").fire("iron-resize");
        },

        is: "patent-view",

        properties: {
            item: {
                type: Object
            }
        },

        return_assignee_text: function(text) {
            return (text ? text.replace(/;/g, ", ") : "#");
        },

        return_keyword_text: function(text) {
            return (text ? text.replace(/;/g, ", ") : "#");
        },

        return_concept_array: function(text) {
            return (text ? text.split(/;/) : "#");
        }

    });
    </script>

</dom-module>
